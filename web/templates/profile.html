{{ define "title" }}Profile{{ end }}

{{ define "content" }}

<div class="row">
    <div class="col">
        <h2>User information</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-2">
        <table class="table table-sm table-bordered table-hover table-condensed">
            <tr>
                <th>Username</th>
                <td>{{ .User.Username }}</td>
            </tr>
            <tr>
                <th>User ID</th>
                <td>{{ .User.ID }}</td>
            </tr>
        </table>
    </div>
</div>

<div class="row">
    <div class="col">
        <h2>PGP Keys</h2>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <table class="table table-sm table-bordered table-hover table-condensed">
            <tr>
                <th>ID</th>
                <th>Fingerprint</th>
            </tr>

            {{ range .Data.PGPKeys }}
            <tr>
                <td>{{ .ID }}</td>
                <td>{{ .Fingerprint }}</td>
            </tr>
            {{ end }}
        </table>
    </div>
</div>

<div class="row">
    <div class="col">
        <h3>Add a PGP key</h3>
    </div>
</div>

<div class="row">
    <div class="col">
        <p>
            To associate a PGP key to your account, you must submit an armored copy
            your public key along with a signed proof.
        </p>
    </div>
</div>

<div class="row">
    <div class="col">

        <div class="form-group">
            <label><strong>Public key (armored):</strong></label>
            <pre><code>$ gpg --armor --export-options export-minimal --export &ltfingerprint&gt</code></pre>
            <textarea name="key" form="form-add-pgp-key" class="form-control" placeholder="public key"></textarea>
        </div>

        <div class="form-group">
            <label><strong>Signed proof:</strong></label>
            <pre><code>$ echo "{{ $.Data.ExpectedPGPKeyProofText }}" | gpg --clearsign --sign-with=&ltfingerprint&gt</code></pre>
            <textarea name="proof" form="form-add-pgp-key" class="form-control" placeholder="signed proof"></textarea>
        </div>

        <form action="/profile/add-pgp-key" id="form-add-pgp-key" method="post">
            <input type="submit" value="Add PGP key" class="btn btn-primary"></input>
        </form>
    </div>
</div>

{{ end }}
